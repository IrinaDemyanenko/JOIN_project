# Блог-платформа на Django с Api
Перед Вами учебный проект блог-платформы или простой социальной сети со встроенным Api,
повторяющим все функции, доступные в вэб-версии приложения.

## Технологический стек:

- Back-end: Django, Django REST Framework
- Front-end: HTML5, CSS3, JavaScript
- База данных: PostgreSQL
- Контейнеризация: Docker, Docker Compose
- Веб-сервер: nginx

Приложенеие упаковано с помощью Docker-compose в три контейнера:
- web - основной код приложения Django;
- db - база данных PostgreSQL;
- nginx - вэб-сервер.
Во избежание потери данных после остановки контейнеров, хранение информации вынесено в volumes:
- pg_data - хранит данные из БД;
- static_value - файлы статики, раздаются nginx для снижения нагрузки на Django проект;
- media_value - хранит материалы, загруженные пользователями.

### Возможности проекта:
1. Анонимный пользователь получает доступ к просмотру новостной ленты - постов зарегистрированных пользователей на главной странице сайта.
2. У каждого поста есть своя страница, простмотр которой так же доступен анонимному пользователю.
3. Посты делятся на категории - группы. Группы может создавать только администартор сайта, пользователи могут отнести свою публикацию к одной из существующих групп.
4. Анонимный пользователь может зарегистрироваться и перейти в новую категорию - пользователь сервиса.
5. Пользователю доступен личный кабинет (prifile), возможность изменить или востановить пароль, а так же выйти из сервиса и перейти в прежнюю категорию - анонимного посетителя.
6. Пользователю доступны те же возможности, что и анонимному посетителю, а так же расширенные функции:
   - создавать/редактировать/удалять посты;
   - по желанию к публикации можно добавить изображение;
   - оставлять комментарии под постами;
   - подписываться на/отписываться от других авторов.


### Возможности API проекта:
* API к проекту создано на базе Django Rest Framework.
* Аутентификация JWT + Djoser. Для обеспечения безопасности проекта, время действия токена ограничено 360 днями.
* Во избежания повышенной нагрузки на сервер проекта, добавлены ограничения (throttlings):
  - для пользователей: 100 запросов в минуту;
  - для анонимных посетителей: 10 запросов в минуту.
* Для удобства и скорости выдачи ответа, добавлено разбиение выдачи на страницы (pagination): 10 объектов на страницу.
* Настоящее API открытое - доступ разрешен ко всем адресам с префиксом /api/.
* Настроен автоматический способ создания документации Open API, с помощью приложения drf-spectacular.

В настоящий момент доступна единственная версия API, документацию к которой можно подробно изучить, после запуска сервера, по адресам:
1) ..../api/v1/docs/swagger/
2) ..../api/v1/docs/redoc/



### Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/IrinaDemyanenko/JOIN_project.git
```

```
cd JOIN_project/join/
```

Скачайте и установите Docker Desktop на компьютер. Зарегистрируйтесь. Снова перейдите в терминал и запустите команду (команда должна быть выполнена из директории ~/JOIN_project/join/):

```
docker-compose up --build
```

Теперь приложение доступно по ссылке http://localhost/.
Сейчас в БД нет информации, можно зарегистрировать несколько пользователей и заполнить её самостоятельно, чтобы узнать все возможности проекта или загрузить в БД демонстрационный файл dump.json. Чтобы это сделать, перейдите в контейнер с Django проектом:

Чтобы узнать CONTAINER_ID, выполните и найдите ID контейнера с вашим Django-приложением:
```
docker ps
```
Войдите в терминал в контейнере с Django проектом:
```
docker exec -it <CONTAINER_ID> bash
```

Импортируйте данные в базу данных:
```
python manage.py loaddata dump.json --exclude contenttypes
```

После успешного импорта данных введите команду exit, чтобы выйти из контейнера:
```
exit
```
Теперь приложение заполнено данными.

